# The Fossa
A Lightning Network ATM, for loose fiat change.

The Fossa is an extension of the Physically Faucet project, by adding support for a coin mechanism.

The project uses a ST7735 1.8 TFT, ESP32 NodeMCU 32s, 5v Relay, Multi Coin Acceptor Mechanism, Storage Box

# Workflow
- User puts in chnage (we use Euros, but the mech can be programmed for any fiat, up to 6 different coins)
- Coin mech sends pulses to the ESP32, 1 pulse for every 10cents (could be better, occasionally drops pulses)
- ESP32 calcualtes how much as been entered (capped for demo purposes at 1.50)
- ESP32 connects to lightning.gifts, and generates an invoice for the amount
- ESP32 connects to an LND instance and pays the invoice on lightning.gifts (This project uses a local copy of Zap as an admin macaroon is required so funds should be limited!
- ESP32 fetches the LNURL generated by lightning.gifts 
*note currently LNURL is only supported by "Bitcion Lightning Wallet" and "Bluewallet"



# Installing arduino + libraries

Install the Arduino IDE,<br>
https://www.arduino.cc/en/Main/Software

Install the ESP32 hardware,<br>
https://github.com/espressif/arduino-esp32#installation-instructions

From "Manage Libraries" install,<br>
- Ucglib
- ArduinoJson
- qrcode (By Richard Moore)

![a](https://i.imgur.com/mCfnhZN.png)

